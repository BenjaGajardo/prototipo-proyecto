<input id="usuario" placeholder="Nombre">
<input id="mensaje" placeholder="Mensaje">
<button onclick="enviar()">Enviar</button>

<div id="chat"></div>


<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot } 
from "https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";

const firebaseConfig = {
  // aquí va tu configuración
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

function enviar() {
  const usuario = document.getElementById("usuario").value;
  const mensaje = document.getElementById("mensaje").value;

  addDoc(collection(db, "mensajes"), {
    usuario,
    mensaje
  });

  document.getElementById("mensaje").value = "";
}

onSnapshot(collection(db, "mensajes"), (snapshot) => {
  const chat = document.getElementById("chat");
  chat.innerHTML = "";

  snapshot.forEach(doc => {
    const data = doc.data();
    chat.innerHTML += `<p><b>${data.usuario}:</b> ${data.mensaje}</p>`;
  });
});

window.enviar = enviar;
</script>

